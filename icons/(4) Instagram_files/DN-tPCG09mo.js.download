;/*FB_PKG_DELIM*/

__d("IGDAudioTranscriptionButtonMutation_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24477971145143978"}),null);
__d("IGDAudioTranscriptionButtonMutation.graphql",["IGDAudioTranscriptionButtonMutation_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"XIGMediaMessageTranscriptionConnection",kind:"LinkedField",name:"xig_media_message_transcription",plural:!1,selections:[{alias:null,args:null,concreteType:"XIGMediaMessageTranscriptionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"node",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"IGDAudioTranscriptionButtonMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"IGDAudioTranscriptionButtonMutation",selections:c},params:{id:b("IGDAudioTranscriptionButtonMutation_instagramRelayOperation"),metadata:{},name:"IGDAudioTranscriptionButtonMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("IGDAudioTranscriptionButton.react",["fbt","CometPressable.react","CometRelay","FDSLineClamp.react","IGDAudioTranscriptionButtonMutation.graphql","IGDSBox.react","IGDSText.react","JSResourceForInteraction","PolarisDismissEntry","PolarisIGCoreText","emptyFunction","react","react-compiler-runtime","requireDeferred","useIGDSLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useEffect,n=e.useRef,o=e.useState,p=c("requireDeferred")("AudioClipsTranscriptionButtonClickFalcoEvent").__setRef("IGDAudioTranscriptionButton.react"),q=c("requireDeferred")("AudioClipsTranscriptionCompleteFalcoEvent").__setRef("IGDAudioTranscriptionButton.react"),r=c("requireDeferred")("AudioClipsTranscriptionExpandClickFalcoEvent").__setRef("IGDAudioTranscriptionButton.react"),s=c("requireDeferred")("AudioClipsTranscriptionFailureFalcoEvent").__setRef("IGDAudioTranscriptionButton.react"),t={incoming:{backgroundColor:null,$$css:!0},outgoing:{backgroundColor:null,$$css:!0},transcriptionButton:{backgroundColor:null,height:"x1kpxq89",marginBottom:"xzueoph",marginInlineStart:"xcev3uh",$$css:!0},transcriptionStyles:{marginBottom:"xfitlp5",marginInlineEnd:"xbmvrgn",marginInlineStart:"xcev3uh",$$css:!0},transcriptionWithExpandedState:{marginBottom:"xod5an3",$$css:!0}},u=h._(/*BTDS*/"View transcription"),v=h._(/*BTDS*/"Transcribing..."),w=h._(/*BTDS*/"See less"),x=h._(/*BTDS*/"See more"),y=h._(/*BTDS*/"Unable to transcribe"),z=h._(/*BTDS*/"Unable to transcribe, try again"),A=1e4,B=2,C=54;function D(a){var b=d("react-compiler-runtime").c(13),e=a.expanded,f=a.lineCount,g=a.outgoing,h=a.text;a=a.textRef;f=f>2&&t.transcriptionWithExpandedState;var i;b[0]!==f?(i=[t.transcriptionStyles,f],b[0]=f,b[1]=i):i=b[1];f=g?"web-always-white":"ig-primary-text";e=e?A:B;g=g?t.outgoing:t.incoming;var j;b[2]!==e||b[3]!==g||b[4]!==h||b[5]!==a?(j=k.jsx(c("FDSLineClamp.react"),{lines:e,ref:a,xstyle:g,children:h}),b[2]=e,b[3]=g,b[4]=h,b[5]=a,b[6]=j):j=b[6];b[7]!==f||b[8]!==j?(e=k.jsx(c("PolarisIGCoreText"),{color:f,children:j}),b[7]=f,b[8]=j,b[9]=e):e=b[9];b[10]!==i||b[11]!==e?(g=k.jsx(c("IGDSBox.react"),{xstyle:i,children:e}),b[10]=i,b[11]=e,b[12]=g):g=b[12];return g}function E(a){var b=d("react-compiler-runtime").c(7),e=a.children,f=a.disabled,g=a.onClick;a=a.outgoing;f=f===void 0?!1:f;a=a?"webAlwaysWhite":"secondaryText";var h;b[0]!==e||b[1]!==a?(h=k.jsx(c("IGDSText.react"),{color:a,size:"footnote",weight:"light",children:e}),b[0]=e,b[1]=a,b[2]=h):h=b[2];b[3]!==f||b[4]!==g||b[5]!==h?(e=k.jsx(c("CometPressable.react"),{disabled:f,onHoverChange:c("emptyFunction"),onPress:g,overlayHoveredStyle:null,overlayPressedStyle:null,xstyle:t.transcriptionButton,children:h}),b[3]=f,b[4]=g,b[5]=h,b[6]=e):e=b[6];return e}function a(a){var e=a.attachment,f=a.outgoing;a=d("CometRelay").useMutation(i!==void 0?i:i=b("IGDAudioTranscriptionButtonMutation.graphql"));var g=a[0],h=a[1];a=o(null);var j=a[0],t=a[1];a=o(!0);var A=a[0],B=a[1];a=o(!1);var F=a[0],G=a[1];a=o(0);var H=a[0],I=a[1];a=c("useIGDSLazyDialog")(c("JSResourceForInteraction")("IGDAudioTranscriptionNUXDialog.react").__setRef("IGDAudioTranscriptionButton.react"));var J=a[0],K=l(function(){p.onReady(function(a){return a.log(function(){return{attachment_id:e.attachmentFbid}})});if(!d("PolarisDismissEntry").isDismissed(d("PolarisDismissEntry").IGD_VOICE_TRANSCRIPTION_NUX_TYPE)){J({});return}if(j!==null)return;g({onCompleted:function(a){var b=(a=(a=a.xig_media_message_transcription)==null?void 0:a.edges[0].node)!=null?a:"";t(b);q.onReady(function(a){return a.log(function(){return{attachment_id:e.attachmentFbid,word_count:b.split(" ").length.toString()}})})},onError:function(a){G(!0),s.onReady(function(b){return b.log(function(){return{attachment_id:e.attachmentFbid,error_message:a.message}})})},variables:{input:{media_id:e.attachmentFbid}}})},[e.attachmentFbid,g,J,j]),L=l(function(){if(F||j===null){G(!1);K();return}else B(function(a){a=!a;r.onReady(function(a){return a.log(function(){return{attachment_id:e.attachmentFbid}})});return a})},[e.attachmentFbid,F,K,j]),M=n(null);m(function(){if(M.current&&j!==null){var a,b=window.getComputedStyle(M.current);b=parseInt(b.lineHeight,10);a=(a=(a=M.current)==null?void 0:a.clientHeight)!=null?a:C;I(Math.ceil(a/b))}},[j]);a=function(){if(F)return k.jsx(E,{onClick:L,outgoing:f,children:z});else if(j==="")return k.jsx(E,{disabled:!0,onClick:L,outgoing:f,children:y});else if(j===null)return k.jsx(E,{disabled:h,onClick:L,outgoing:f,children:h?v:u});else if(H>2)return k.jsx(E,{onClick:L,outgoing:f,children:A?w:x});return null};return k.jsxs(k.Fragment,{children:[j!=null?k.jsx(D,{expanded:A,lineCount:H,outgoing:f,text:j,textRef:M}):null,a()]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("IGDAudioWaveformPlayerContainer.react",["I64","IGDAudioTranscriptionButton.react","IGDSBox.react","LSAuthorityLevel","LSIntEnum","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var b=d("react-compiler-runtime").c(12),e=a.attachment,f=a.children,g=a.innerHeight;a=a.outgoing;var h;b[0]!==e.authorityLevel?(h=(i||(i=d("I64"))).equal(e.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),b[0]=e.authorityLevel,b[1]=h):h=b[1];h=h;var l;b[2]!==f||b[3]!==g?(l=k.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",height:g,justifyContent:"between",marginBottom:3,marginTop:2,paddingX:2,width:"100%",children:f}),b[2]=f,b[3]=g,b[4]=l):l=b[4];b[5]!==e||b[6]!==h||b[7]!==a?(f=h&&k.jsx(c("IGDAudioTranscriptionButton.react"),{attachment:e,outgoing:a}),b[5]=e,b[6]=h,b[7]=a,b[8]=f):f=b[8];b[9]!==l||b[10]!==f?(g=k.jsxs(c("IGDSBox.react"),{flex:"grow",height:"100%",justifyContent:"center",width:"100%",children:[l,f]}),b[9]=l,b[10]=f,b[11]=g):g=b[11];return g}g["default"]=a}),98);
__d("MAWMessageIntegrityLoggingSampleRate",["QuickPerformanceLogger","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Set([c("qpl")._(25303796,"1974")]);function a(){for(var a of i)(h||(h=c("QuickPerformanceLogger"))).setAlwaysOnSampleRate(a,1)}function b(){return 1}g.overwriteSamplingRate=a;g.getIntegrityCheckSampleRate=b}),98);